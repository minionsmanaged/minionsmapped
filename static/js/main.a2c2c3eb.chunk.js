(this.webpackJsonpminionsmapped=this.webpackJsonpminionsmapped||[]).push([[0],{17:function(n,e,t){n.exports=t(29)},22:function(n,e,t){},28:function(n,e,t){},29:function(n,e,t){"use strict";t.r(e);var o=t(1),a=t.n(o),r=t(11),c=t.n(r),i=(t(22),t(8)),u=t(3),s=t(12),l=t(13),f=t(16),m=t(14),p=t(4),g=t(15),h=t(2),d=t(6),k=t(5),I=(t(28),function(n){function e(){var n;return Object(s.a)(this,e),(n=Object(f.a)(this,Object(m.a)(e).call(this))).state={domains:[],pools:{},runningInstanceCounts:{}},n.queryTaskcluster=n.queryTaskcluster.bind(Object(p.a)(n)),n}return Object(g.a)(e,n),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.queryTaskcluster()}},{key:"queryTaskcluster",value:function(){var n=this,e=[];fetch("https://firefox-ci-tc.services.mozilla.com/api/worker-manager/v1/worker-pools").then((function(n){return n.json()})).then((function(t){(e=e.concat(t.workerPools)).forEach((function(e){return n.getRunningInstanceCount(e)}));var o=e.map((function(n){return n.workerPoolId.split("/")[0]})).filter((function(n,e,t){return t.indexOf(n)===e})),a=Object.assign.apply(Object,[{}].concat(Object(u.a)(o.map((function(n){return Object(i.a)({},n,e.filter((function(e){return e.workerPoolId.startsWith(n+"/")})))})))));n.setState({domains:o,pools:a}),"continuationToken"in t&&fetch("https://firefox-ci-tc.services.mozilla.com/api/worker-manager/v1/worker-pools?continuationToken="+t.continuationToken).then((function(n){return n.json()})).then((function(t){(e=e.concat(t.workerPools)).forEach((function(e){return n.getRunningInstanceCount(e)})),o=e.map((function(n){return n.workerPoolId.split("/")[0]})).filter((function(n,e,t){return t.indexOf(n)===e})),a=Object.assign.apply(Object,[{}].concat(Object(u.a)(o.map((function(n){return Object(i.a)({},n,e.filter((function(e){return e.workerPoolId.startsWith(n+"/")})))}))))),n.setState({domains:o,pools:a})}))}))}},{key:"renderProviderIcon",value:function(n){switch(n){case"aws":return a.a.createElement(h.a,{icon:k.a});case"azure":return a.a.createElement(h.a,{icon:k.c});default:return n.endsWith("-gcp")?a.a.createElement(h.a,{icon:k.b}):a.a.createElement(h.a,{icon:d.a})}}},{key:"getRunningInstanceCount",value:function(n){var e=this.state.runningInstanceCounts;return n.workerPoolId in e||(e[n.workerPoolId]=Math.floor(Math.random()*Math.floor(n.config.maxCapacity)),this.setState({runningInstanceCounts:e})),e[n.workerPoolId]}},{key:"getRunningInstanceIconCount",value:function(n){return Math.round(this.getRunningInstanceCount(n)/n.config.maxCapacity*100/10)}},{key:"getNonRunningInstanceIconCount",value:function(n){var e=this.getRunningInstanceIconCount(n),t=Math.round((n.config.maxCapacity-this.getRunningInstanceCount(n))/n.config.maxCapacity*100/10);return e+t>10?t-1:t}},{key:"render",value:function(){var n=this;return a.a.createElement("div",null,a.a.createElement("ul",null,this.state.domains.map((function(e){return a.a.createElement("li",{key:e},e,a.a.createElement("ul",{className:"fa-ul"},n.state.pools[e].map((function(e){return a.a.createElement("li",{key:e.workerPoolId},a.a.createElement("span",{className:"fa-li"},n.renderProviderIcon(e.providerId)),a.a.createElement("strong",null,e.workerPoolId.split("/")[1]),a.a.createElement("br",null),Object(u.a)(Array(n.getRunningInstanceIconCount(e)).keys()).map((function(n){return a.a.createElement(h.a,{icon:d.b,key:n,style:{marginRight:"2px",color:"#dff883"}})})),Object(u.a)(Array(n.getNonRunningInstanceIconCount(e)).keys()).map((function(n){return a.a.createElement(h.a,{icon:d.b,key:n,style:{marginRight:"2px",color:"#bebebe"}})})),"\xa0",a.a.createElement("span",{style:{fontSize:"80%"}},n.getRunningInstanceCount(e),"/",e.config.maxCapacity))}))))}))))}}]),e}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(n){n.unregister()})).catch((function(n){console.error(n.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.a2c2c3eb.chunk.js.map