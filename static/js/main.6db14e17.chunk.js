(this.webpackJsonpminionsmapped=this.webpackJsonpminionsmapped||[]).push([[0],{20:function(t,e,n){t.exports=n(33)},25:function(t,e,n){},31:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var o=n(0),i=n.n(o),a=n(18),r=n.n(a),s=(n(25),n(12)),c=n(16),l=n(4),u=n(5),p=n(8),f=n(6),h=n(2),m=n(7),k=n(10),d=n(3),v=n(14),w=n(9);Date.prototype.addHours=function(t){return this.setHours(this.getHours()+t),this};var y=function(t){function e(t){var n;Object(l.a)(this,e);var o=(n=Object(p.a)(this,Object(f.a)(e).call(this,t))).props.pool.workerPoolId.split("/");return n.state={instances:[],pending:0,domain:o.length>0?o[0]:"",pool:o.length>1?o[1]:""},n.queryTaskcluster=n.queryTaskcluster.bind(Object(h.a)(n)),n}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.queryTaskcluster()}},{key:"queryTaskcluster",value:function(){var t=this,e=[];fetch("https://firefox-ci-tc.services.mozilla.com/api/queue/v1/provisioners/"+this.state.domain+"/worker-types/"+this.state.pool+"/workers").then((function(t){return t.json()})).then((function(n){e=e.concat(n.workers),t.setState({instances:e}),"continuationToken"in n&&e.length<t.props.pool.config.maxCapacity&&fetch("https://firefox-ci-tc.services.mozilla.com/api/queue/v1/provisioners/"+t.state.domain+"/worker-types/"+t.state.pool+"/workers?continuationToken="+n.continuationToken).then((function(t){return t.json()})).then((function(n){e=e.concat(n.workers),t.setState({instances:e}),"continuationToken"in n&&e.length<t.props.pool.config.maxCapacity&&fetch("https://firefox-ci-tc.services.mozilla.com/api/queue/v1/provisioners/"+t.state.domain+"/worker-types/"+t.state.pool+"/workers?continuationToken="+n.continuationToken).then((function(t){return t.json()})).then((function(n){e=e.concat(n.workers),t.setState({instances:e}),"continuationToken"in n&&e.length<t.props.pool.config.maxCapacity&&fetch("https://firefox-ci-tc.services.mozilla.com/api/queue/v1/provisioners/"+t.state.domain+"/worker-types/"+t.state.pool+"/workers?continuationToken="+n.continuationToken).then((function(t){return t.json()})).then((function(n){e=e.concat(n.workers),t.setState({instances:e})}))}))}))})),fetch("https://firefox-ci-tc.services.mozilla.com/api/queue/v1/pending/"+this.state.domain+"/"+this.state.pool).then((function(t){return t.json()})).then((function(e){var n=e.pendingTasks;t.setState({pending:n})}))}},{key:"renderProviderIcon",value:function(){switch(this.props.pool.providerId){case"aws":return i.a.createElement(d.a,{icon:w.a});case"azure":return i.a.createElement(d.a,{icon:w.c});case"null-provider":return i.a.createElement(d.a,{icon:v.b});default:return this.props.pool.providerId.endsWith("-gcp")?i.a.createElement(d.a,{icon:w.b}):i.a.createElement(d.a,{icon:v.a})}}},{key:"render",value:function(){return i.a.createElement("li",{key:this.props.pool.workerPoolId},i.a.createElement("span",{className:"fa-li"},this.renderProviderIcon()),i.a.createElement("strong",null,this.state.pool),i.a.createElement("span",{style:{fontSize:"80%"}},"\xa0max: ",this.props.pool.config.maxCapacity,", \xa0working: ",this.state.instances.filter((function(t){return"latestTask"in t&&"firstClaim"in t})).length,", \xa0initialising: ",this.state.instances.filter((function(t){return(!("latestTask"in t)||!("firstClaim"in t))&&new Date(t.firstClaim)>(new Date).addHours(-1)})).length,", \xa0pending: ",this.state.pending),i.a.createElement("br",null),i.a.createElement(k.a,null,i.a.createElement(k.a,{striped:!0,variant:"success",now:Math.min(this.props.pool.config.maxCapacity,this.state.instances.filter((function(t){return"latestTask"in t&&"firstClaim"in t})).length),max:this.props.pool.config.maxCapacity,key:1}),i.a.createElement(k.a,{striped:!0,now:Math.min(this.props.pool.config.maxCapacity,this.state.instances.filter((function(t){return(!("latestTask"in t)||!("firstClaim"in t))&&new Date(t.firstClaim)>(new Date).addHours(-1)})).length),max:this.props.pool.config.maxCapacity,key:2})))}}]),e}(o.Component),g=(n(31),function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(p.a)(this,Object(f.a)(e).call(this))).state={domains:[],pools:{}},t.queryTaskcluster=t.queryTaskcluster.bind(Object(h.a)(t)),t}return Object(m.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.queryTaskcluster()}},{key:"queryTaskcluster",value:function(){var t=this,e=[];fetch("https://firefox-ci-tc.services.mozilla.com/api/worker-manager/v1/worker-pools").then((function(t){return t.json()})).then((function(n){var o=(e=e.concat(n.workerPools)).map((function(t){return t.workerPoolId.split("/")[0]})).filter((function(t,e,n){return n.indexOf(t)===e})),i=Object.assign.apply(Object,[{}].concat(Object(c.a)(o.map((function(t){return Object(s.a)({},t,e.filter((function(e){return e.workerPoolId.startsWith(t+"/")})))})))));t.setState({domains:o,pools:i}),"continuationToken"in n&&fetch("https://firefox-ci-tc.services.mozilla.com/api/worker-manager/v1/worker-pools?continuationToken="+n.continuationToken).then((function(t){return t.json()})).then((function(n){e=e.concat(n.workerPools),o=e.map((function(t){return t.workerPoolId.split("/")[0]})).filter((function(t,e,n){return n.indexOf(t)===e})),i=Object.assign.apply(Object,[{}].concat(Object(c.a)(o.map((function(t){return Object(s.a)({},t,e.filter((function(e){return e.workerPoolId.startsWith(t+"/")})))}))))),t.setState({domains:o,pools:i})}))}))}},{key:"render",value:function(){var t=this;return i.a.createElement("div",null,i.a.createElement("ul",null,this.state.domains.map((function(e){return i.a.createElement("li",{key:e},e,i.a.createElement("ul",{className:"fa-ul"},t.state.pools[e].map((function(t){return i.a.createElement(y,{pool:t,key:t.workerPoolId})}))))}))))}}]),e}(o.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(32);r.a.render(i.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.6db14e17.chunk.js.map